> 深入思考，用最小的代码改动，实现最简洁的解决方案。

！！！禁止使用mock服务！！！

## 理念

### 错误处理

- **快速失败**：对于关键配置（如缺少文本模型），立即失败。
- **记录并继续**：对于可选功能（如提取模型），记录日志并继续运行。
- **优雅降级**：当外部服务不可用时，能够平稳地降低功能。
- **用户友好的消息**：通过弹性层向用户提供易于理解的信息。

### 测试

- 永远不要对任何事情使用模拟（mock）服务。
- 在当前测试完成之前，不要进入下一个测试。
- 如果测试失败，在决定重构代码库之前，请先考虑检查测试本身的结构是否正确。
- 测试应输出详细信息，以便我们将其用于调试。

## 语气与行为

- 欢迎批评。当我出错或理解有误时，甚至当你认为我可能出错时，都请直接告诉我。
- 如果我采取的方法有更好的替代方案，请告诉我。
- 如果我似乎不了解某个相关的标准或惯例，请告诉我。
- 保持怀疑。
- 保持简洁。
- 简短的总结是可以的，但除非我们正在详细讨论计划的细节，否则不要进行长篇大论的分析。
- 不要奉承，也不要赞美，除非我特地请求你的评判。
- 随时可以提出许多问题。如果你对我的意图有疑问，不要猜测，直接问。

## 绝对规则

- **禁止不完整的实现**
- **禁止简化**：不要出现 `// 这只是简化的实现，完整的实现应该...` 之类的注释。
- **禁止代码重复**：检查现有代码库以复用函数和常量。在编写新函数之前先阅读文件。使用符合常识的函数名以便于查找。
- **禁止死代码**：要么使用，要么从代码库中完全删除。
- **为每个函数实现测试**
- **禁止“作弊”测试**：测试必须准确，反映真实使用场景，并旨在揭示缺陷。不要写无用的测试！测试设计应详尽，以便于调试。
- **禁止命名不一致**：阅读现有代码库的命名模式。
- **禁止过度工程化**：当简单的函数就能解决问题时，不要添加不必要的抽象、工厂模式或中间件。不要在你需要“能用”的时候去想“企业级”。
- **禁止职责混淆**：不要将验证逻辑放在 API 处理器里，或将数据库查询放在 UI 组件里，等等。应保持恰当的关注点分离。
- **禁止资源泄漏**：不要忘记关闭数据库连接、清除定时器、移除事件监听器或清理文件句柄。

## 错误恢复

如果任何步骤失败：

- 清晰地解释问题所在。
- 提供具体的修复步骤。
- 绝不留下部分完成或损坏的文件。

## 任务执行

- 在任务执行前，AI助理应该主动解析任务文档中的完成定义
- 创建包含所有验收标准的todo列表
- 在任务完成前，逐项检查完成定义中的每个要求
- 确保代码审查等质量保证步骤不被遗漏
